SQL Architecture

     User ---> Command parser ---> Query Optimizer ---> Query Executor ---> Access Method ---> Buffer Manager ---> Buffer Pool(Plan cache, Data Cache) ---> MDF (vice verse)

-> If user runs any commands like (insert, update) any query it goes to command parser.
      -> Open SSMS -> Side to execute, you can see tick symbol called Parser which checks the syntax errors.  
                      If no syntax error -> it goes to Query Optimizer
-> Query Optimizer generates the best plan based on response time & passes to query executer for execution
-> Query Executor requires data to read the plan generated by query optimizer & send to access method
-> Access method asks data to Buffer Manager(like customer is asking the data or need to update data)
-> Buffer Manager checks the data in Buffer pool (i.e, in data cache) to see if data page already in cache memory.
           -> if data page there, then it passes to access method
           -> if data page not there, then it takes from the MDF
-> Buffer pool contains 2 cache i.e, Plan Cache & Data Cache
-> Plan Cache: When you runs the query,you will get an ID, that ID stores in plan cache. when you run the same query it directly comes from plan cache to Command parser
               ->It checks the ID was present, then it goes to data cache and gives data to user
-> Data Cache: it is the largest part of bufferpool. every data page that read from disk is written as copy here before use.
                -> Under memory pressure,these pages are flushed from the cache using Least Recently Used (LRU) policy.
                
                
